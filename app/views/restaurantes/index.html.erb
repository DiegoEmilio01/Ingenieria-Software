
  <p id="notice"><%= notice %></p>

  <% if @fav %>
    <h1>Restaurantes favoritos</h1>
  <% else %>
    <h1>Restaurantes</h1>
  <% end %>

  <% if (@fav) %>
    <table class="table">
      <thead>
      <tr>
        <th>Nombre</th>
        <th>Comuna</th>
        <th></th>
        <th></th>
      </tr>
      </thead>

      <tbody>
      <% current_swiper.favoritos.each do |restaurante| %>
        <tr>
          <td><%= restaurante.nombre %></td>
          <td><%= restaurante.comuna.nombre %></td>
          <% if @swiper_cita_id && @swiper_citado_id %>
            <td><%= link_to 'Ver detalles para agendar una cita',
                            restaurante_cita_path(@swiper_cita_id, @swiper_citado_id, restaurante.id) %></td>
          <% else %>
            <td><%= link_to 'Ver detalles', restaurante_path(restaurante.id) %></td>
          <% end %>
          <td><%= link_to 'Quitar de favoritos', delete_favorito_path(current_swiper.id, @swiper_citado_id, restaurante.id) %></td>
        </tr>
      <% end %>
      </tbody>
    </table>

  <% else %>

    <% if current_swiper %>
      <h4> En comunas sin cuarentena </h4>
    <% end %>

    <h3 style="margin: 0px; margin-bottom: -17px;"> Ordenar por: </h3>
    <div class="row">
      <div class="col-md-4 align-middle" >
        <table>
          <tbody>
          <td>
            <%= form_tag(controller: 'restaurantes', action: "filtro", method: "post") do %>
              <% if @swiper_cita_id && @swiper_citado_id %>
                <div class="field">
                  <%= hidden_field_tag(:id, @swiper_cita_id) %>
                </div>
                <div class="field">
                  <%= hidden_field_tag(:id_a, @swiper_citado_id) %>
                </div>
              <% end %>
              <div class="field">
                <%= hidden_field_tag(:filtro, "o_nombre") %><br>
              </div>
              <div class="actions">
                <%= submit_tag("Nombre") %><br><br>
              </div>
            <% end %>
          </td>
          </tbody>
        </table>
      </div>
      <div class="col-md-4 align-middle">
        <table>
          <thead>
          <tr>
            <th>Filtrar por nombre</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>
              <%= form_tag(controller: 'restaurantes', action: "filtro", method: "post") do %>
                <% if @swiper_cita_id && @swiper_citado_id %>
                  <div class="field">
                    <%= hidden_field_tag(:id, @swiper_cita_id) %>
                  </div>
                  <div class="field">
                    <%= hidden_field_tag(:id_a, @swiper_citado_id) %>
                  </div>
                <% end %>
                <div class="field">
                  <%= text_field_tag(:input) %>
                </div>
                <div class="field">
                  <%= hidden_field_tag(:filtro, "nombre") %>
                </div><br>

            </td>
            <td>
              <div class="actions">
                <%= submit_tag("Filtrar") %><br><br>
              </div>
              <% end %>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-4 align-middle" >
        <table>
          <thead>
          <tr>
            <th>Filtrar por comuna</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>
              <%= form_tag(controller: 'restaurantes', action: "filtro", method: "post") do %>
                <% if @swiper_cita_id && @swiper_citado_id %>
                  <div class="field">
                    <%= hidden_field_tag(:id, @swiper_cita_id) %>
                  </div>
                  <div class="field">
                    <%= hidden_field_tag(:id_a, @swiper_citado_id) %>
                  </div>
                <% end %>
                <div class="field">
                  <%= select_tag(:input, options_from_collection_for_select(Comuna.all, :id, :nombre))%>
                </div>
                <div class="field">
                  <%= hidden_field_tag(:filtro, "comuna") %><br>
                </div>
            </td>
            <td>
              <div class="actions">
                <%= submit_tag("Filtrar") %><br><br>
              </div>
              <% end %>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <hr style="border: 1px solid;color: #566787;">
    <% @restaurantes.each do |restaurante| %>
    <div class="row text-center">
      <div class="col-md-2 align-middle">
        <% if !restaurante.imagenes.empty? %>
          <%= image_tag(restaurante.imagenes[0], style:"max-width: 200px;max-height: 200px;") %>
        <% end %>
      </div>
      <div class="col-md-10 align-middle" style="min-height:200px;">
        <div class="row text-left"><h2><%= restaurante.nombre %></h2></div>
        <div class="row">
          <div class="col-md-2 text-left"><b>Comuna</b></div>
          <div class="col-md-2 text-left"><b>Due√±o</b></div>
        </div>
        <div class="row">
          <div class="col-md-2 text-left"><%= restaurante.comuna.nombre %></div>
          <div class="col-md-2 text-left"><%= restaurante.owner.nombre %></div>
          <% if @swiper_cita_id && @swiper_citado_id %>
            <div class="col-md-6 text-left"><%= link_to 'Ver para agendar cita', restaurante_cita_path(@swiper_cita_id, @swiper_citado_id, restaurante.id) %></div>
          <% else %>
            <div class="col-md-6 text-right"><%= link_to 'Ver', restaurante_path(restaurante.id), :class => "btn btn-primary" %></div>
          <% end %>
        </div><br>
        <div class="row">
          <div class="col-md-4 text-left"><%= restaurante.descripcion %></div>
        </div>
      </div>
    </div><hr style="border: 1px solid;color: #566787;"><br>
    <% end %>
     
  <% end %>
  <br><br>

  <br>
  <% if current_admin %>
    <%= link_to 'Volver a la lista de acciones disponibles.', admin_root_path %><br>
  <% end %>