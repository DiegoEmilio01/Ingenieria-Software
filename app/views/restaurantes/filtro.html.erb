<% if current_admin or current_swiper%>
  <p id="notice"><%= notice %></p>

  <h1>Restaurantes</h1>

  <h3 style="margin: 0px; margin-bottom: -17px;"> Ordenar por: </h3>
  <table>
      <tbody>
          <tr>
              <td>
                  <%= form_tag(controller: 'restaurantes', action: "filtro", method: "post") do %>
                      <% if @swiper_cita_id && @swiper_citado_id %>
                        <div class="field">
                          <%= hidden_field_tag(:id, @swiper_cita_id) %>
                        </div>
                        <div class="field">
                          <%= hidden_field_tag(:id_a, @swiper_citado_id) %>
                        </div>
                      <% end %>
                      <div class="field">
                          <%= hidden_field_tag(:filtro, "o_nombre") %><br>
                      </div>
                      <div class="actions">
                          <%= submit_tag("Nombre") %><br><br>
                      </div>
                  <% end %>
              </td>
          </tr>
      </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Comuna</th>
      </tr>
    </thead>

    <tbody>
      <% @filtrados.each do |restaurante| %>
      <tr>
        <td><%= restaurante.nombre %></td>
        <td><%= restaurante.comuna.nombre %></td>
        <% if @swiper_cita_id && @swiper_citado_id %>
          <td><%= link_to 'Ver detalles para agendar una cita', restaurante_cita_path(@swiper_cita_id, @swiper_citado_id, restaurante.id) %></td>
        <% else %>
          <td><%= link_to 'Ver detalles', restaurante_path(restaurante.id) %></td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
  <br><br>
  <table>
    <thead>
        <tr>
            <th>Filtrar por nombre</th>
            <th>Filtrar por comuna</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <%= form_tag(controller: 'restaurantes', action: "filtro", method: "post") do %>
                    <% if @swiper_cita_id && @swiper_citado_id %>
                      <div class="field">
                        <%= hidden_field_tag(:id, @swiper_cita_id) %>
                      </div>
                      <div class="field">
                        <%= hidden_field_tag(:id_a, @swiper_citado_id) %>
                      </div>
                    <% end %>
                    <div class="field">
                        <%= text_field_tag(:input) %>
                    </div>
                    <div class="field">
                        <%= hidden_field_tag(:filtro, "nombre") %><br>
                    </div>
                    <div class="actions">
                        <%= submit_tag("Filtrar") %><br><br>
                    </div>
                <% end %>
            </td>
            <td>
              <%= form_tag(controller: 'restaurantes', action: "filtro", method: "post") do %>
                  <% if @swiper_cita_id && @swiper_citado_id %>
                      <div class="field">
                        <%= hidden_field_tag(:id, @swiper_cita_id) %>
                      </div>
                      <div class="field">
                        <%= hidden_field_tag(:id_a, @swiper_citado_id) %>
                      </div>
                  <% end %>
                  <div class="field">
                      <%= select_tag(:input, options_from_collection_for_select(Comuna.all, :id, :nombre))%>
                  </div>
                  <div class="field">
                      <%= hidden_field_tag(:filtro, "comuna") %><br>
                  </div>
                  <div class="actions">
                      <%= submit_tag("Filtrar") %><br><br>
                  </div>
              <% end %>
          </td>
        </tr>
    </tbody>
  </table>

  <br>
  <% if current_owner #esto debe sacarse después a owner %>
    <%= link_to 'Crear Restaurante', restaurantes_new_path %><br><br>
  <% end %>
  <% if current_admin %>
    <%= link_to 'Volver a la lista de acciones disponibles.', admin_root_path %><br>
  <% end %>
<% else %>
  <% controller.redirect_to new_admin_session_path, notice: 'No tienes permiso para ingresar a la página que intentaste acceder.' %>
<% end %>